<div class="mfe-produto-container" [ngClass]="getAuthStatusClass()">
  <!-- Cabe√ßalho de autentica√ß√£o -->
  <div class="auth-header">
    <h2>üîê MFE Produto - Gerenciamento de Token</h2>
    
    <div *ngIf="isAuthorized" class="auth-success-banner">
      ‚úÖ Acesso autorizado para: {{ currentUser?.name }} ({{ currentUser?.username }})
      <br>
      <small>Scopes: {{ currentUser?.scopes?.join(', ') }}</small>
      
      <!-- Informa√ß√µes de refresh do token -->
      <div class="token-refresh-info" *ngIf="tokenUpdateCount > 0">
        <span class="refresh-icon">üîÑ</span>
        <span class="refresh-text">{{ getTokenUpdateInfo() }}</span>
        <small *ngIf="lastTokenUpdate"> - √öltima: {{ getLastUpdateTime() }}</small>
      </div>
    </div>
    
    <div *ngIf="authError" class="auth-error-banner">
      ‚ùå {{ authError }}
    </div>
    
    <div *ngIf="!isAuthorized && !authError" class="auth-pending-banner">
      ‚è≥ Aguardando valida√ß√£o de token...
    </div>
  </div>

  <!-- Conte√∫do principal (s√≥ exibe se autorizado) -->
  <div *ngIf="isAuthorized" class="main-content">
    <app-product-dashboard></app-product-dashboard>
  </div>

  <!-- Informa√ß√µes de debug (apenas em desenvolvimento) -->
  <div *ngIf="debugInfo" class="debug-info">
    <details>
      <summary>üîç Debug - Gerenciamento de Token no MFE-Produto</summary>
      <div class="debug-content">
        <h4>Status de Autentica√ß√£o:</h4>
        <p><strong>Autorizado:</strong> {{ debugInfo.isAuthenticated ? 'Sim' : 'N√£o' }}</p>
        <p><strong>Token V√°lido:</strong> {{ debugInfo.tokenValid ? 'Sim' : 'N√£o' }}</p>
        <p><strong>Scope Necess√°rio:</strong> {{ debugInfo.requiredScope }}</p>
        <p><strong>Possui Scope:</strong> {{ debugInfo.hasRequiredScope ? 'Sim' : 'N√£o' }}</p>
        
        <h4>Gerenciamento de Token:</h4>
        <p><strong>Atualiza√ß√µes:</strong> {{ tokenUpdateCount }}</p>
        <p><strong>√öltima Atualiza√ß√£o:</strong> {{ lastTokenUpdate || 'Nenhuma' }}</p>
        
        <h4 *ngIf="debugInfo.expirationInfo">Expira√ß√£o do Token:</h4>
        <div *ngIf="debugInfo.expirationInfo">
          <p><strong>V√°lido:</strong> {{ debugInfo.expirationInfo.isValid ? 'Sim' : 'N√£o' }}</p>
          <p><strong>Expira em:</strong> {{ debugInfo.expirationInfo.expiresInMinutes }} minutos</p>
          <p><strong>Expira em:</strong> {{ debugInfo.expirationInfo.expiresInHours }} horas</p>
        </div>
        
        <h4>Debug Completo:</h4>
        <pre>{{ debugInfo | json }}</pre>
      </div>
    </details>
  </div>
</div>